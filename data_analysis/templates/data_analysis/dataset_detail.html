{% extends "data_analysis/base.html" %}

{% block title %}{{ dataset.name }}{% endblock %}

{% block content %}
<h1 class="mb-4">{{ dataset.name }}</h1>
<p>{{ dataset.description }}</p>

<h2 class="mt-4 mb-3">Filtres</h2>
<form method="get" class="mb-4">
    <div class="row">
        <div class="col-md-4">
            <label for="date_from">Date de début:</label>
            <input type="date" name="date_from" id="date_from" class="form-control">
        </div>
        <div class="col-md-4">
            <label for="date_to">Date de fin:</label>
            <input type="date" name="date_to" id="date_to" class="form-control">
        </div>
        <div class="col-md-4">
            <label for="category">Catégorie:</label>
            <select name="category" id="category" class="form-control">
                <option value="">Toutes les catégories</option>
                {% for category in categories %}
                <option value="{{ category }}">{{ category }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-md-4">
            <label for="value_min">Valeur minimum:</label>
            <input type="number" name="value_min" id="value_min" class="form-control">
        </div>
        <div class="col-md-4">
            <label for="value_max">Valeur maximum:</label>
            <input type="number" name="value_max" id="value_max" class="form-control">
        </div>
        <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-primary">Appliquer les filtres</button>
        </div>
    </div>
</form>

<h2 class="mt-4 mb-3">Données</h2>
<div class="table-responsive">
    {{ data|safe }}
</div>

<a href="{% url 'create_analysis' dataset.pk %}" class="btn btn-success mt-4">Créer une nouvelle analyse</a>
{% endblock %}